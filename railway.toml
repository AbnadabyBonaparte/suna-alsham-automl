[build]
builder = "dockerfile"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "python start.py"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

[environments.production]
[environments.production.variables]
ENVIRONMENT = "production"
PYTHONPATH = "/app"
PYTHONUNBUFFERED = "1"
PORT = "8000"
HOST = "0.0.0.0"
# Logging
LOG_LEVEL = "INFO"
ENABLE_STRUCTURED_LOGGING = "true"
# Performance
WORKERS = "1"
MAX_WORKERS = "4"
WORKER_TIMEOUT = "300"
KEEP_ALIVE = "2"
# Memory Management
MAX_MEMORY_MB = "1024"
GARBAGE_COLLECTION_THRESHOLD = "700"

[environments.development]
[environments.development.variables]  
ENVIRONMENT = "development"
PYTHONPATH = "/app"
PYTHONUNBUFFERED = "1"
PORT = "8000"
HOST = "0.0.0.0" 
LOG_LEVEL = "DEBUG"

[[services]]
name = "alsham-quantum"

[services.source]
repo = "your-repo/alsham-quantum"
branch = "main"

[services.variables]
# Sistema Core
SYSTEM_NAME = "ALSHAM_QUANTUM"
VERSION = "2.0.0"
DEBUG = "false"
# Railway Specific
RAILWAY_ENVIRONMENT_NAME = "$RAILWAY_ENVIRONMENT_NAME"
RAILWAY_SERVICE_NAME = "$RAILWAY_SERVICE_NAME"
RAILWAY_DEPLOYMENT_ID = "$RAILWAY_DEPLOYMENT_ID"
# Network
PORT = "$PORT"
HOST = "0.0.0.0"
ALLOWED_HOSTS = "*"
# Security
SECRET_KEY = "$SECRET_KEY"
CORS_ORIGINS = "*"
RATE_LIMIT_ENABLED = "true"
RATE_LIMIT_PER_MINUTE = "100"
# Monitoring
HEALTH_CHECK_ENABLED = "true"
METRICS_ENABLED = "true"
PROMETHEUS_ENABLED = "true"
# Performance Tuning
ASYNC_POOL_SIZE = "10"
CONNECTION_POOL_SIZE = "20"
REQUEST_TIMEOUT = "30"
RESPONSE_TIMEOUT = "60"
# Memory & CPU
MEMORY_LIMIT_MB = "1024"
CPU_LIMIT = "1.0"
DISK_SPACE_MB = "2048"
# Caching
REDIS_CACHE_ENABLED = "true"
CACHE_TTL_SECONDS = "3600"
CACHE_MAX_SIZE_MB = "256"

[services.healthcheck]
path = "/health"
interval = 30
timeout = 10
retries = 3

[services.scaling]
minReplicas = 1
maxReplicas = 3
targetCPU = 70
targetMemory = 80

[services.resources]
memory = "1024Mi"
cpu = "1000m"
disk = "2Gi"
