# ALSHAM QUANTUM - Cursor Rules
# Este arquivo é lido automaticamente pelo Cursor IDE

## REGRAS INVIOLÁVEIS

### 1. DATA HONESTY
- NUNCA sugira dados fake em produção
- NUNCA hardcode métricas (12ms, 99.9%, 42 agentes)
- SEMPRE mostre 0 quando é 0
- SEMPRE use queries reais ao Supabase

### 2. STATE MANAGEMENT
- SEMPRE use Zustand para estado compartilhado
- NUNCA use Context API para state (exceto AuthContext legado)
- NUNCA use useState para dados globais
- SEMPRE use devtools middleware em stores

### 3. TYPESCRIPT
- SEMPRE TypeScript strict mode
- NUNCA use 'any'
- NUNCA use @ts-ignore
- SEMPRE tipos explícitos em funções

### 4. ASYNC/ERROR HANDLING
- SEMPRE try/catch em operações async
- SEMPRE handle errors explicitamente
- NUNCA deixe promises sem catch

### 5. COMMITS
- SEMPRE conventional commits: type(scope): description
- Tipos: feat, fix, docs, refactor, perf, test, chore

## STACK

```
Frontend: Next.js 16 + React 19 + TypeScript 5 + Tailwind
State: Zustand 5 (com devtools + persist)
Backend: Supabase (PostgreSQL + Auth + Realtime)
Deploy: Vercel (frontend) + Railway (workers)
```

## PADRÕES DE CÓDIGO

### Zustand Store
```typescript
import { create } from 'zustand';
import { devtools, persist } from 'zustand/middleware';

export const useMyStore = create<MyStore>()(
  devtools(
    persist(
      (set) => ({
        data: [],
        setData: (data) => set({ data }, false, 'my/setData'),
      }),
      { name: 'my-storage' }
    ),
    { name: 'MyStore' }
  )
);
```

### Custom Hook
```typescript
export function useMyData() {
  const store = useMyStore();
  
  const fetchData = async () => {
    try {
      const { data, error } = await supabase.from('table').select('*');
      if (error) throw error;
      store.setData(data || []);
    } catch (err) {
      console.error('Failed:', err);
    }
  };

  return { ...store, fetchData };
}
```

### Página
```typescript
"use client";

export default function MyPage() {
  const { data, loading } = useMyData();
  if (loading) return <Skeleton />;
  return <div>{data.map(...)}</div>;
}
```

## ARQUIVOS IMPORTANTES

- docs/policies/ARCHITECTURE-STANDARDS.md - Padrões obrigatórios
- docs/policies/HONESTY.md - Política de dados reais
- docs/project/PROGRESS.md - Estado atual
- docs/architecture/decisions/ - ADRs

## ESTRUTURA

```
frontend/src/
├── app/           # Páginas (App Router)
├── components/    # Componentes React
├── stores/        # Zustand stores (12)
├── hooks/         # Custom hooks (20+)
└── lib/           # Supabase, utils
```

## PROBLEMA ATUAL

Login/Cookie: Cliente usa localStorage, middleware espera cookie.
Solução: Migrar para @supabase/ssr ou ajustar middleware.

## FILOSOFIA

"Código de empresa bilionária. FAANG-level. Zero paliativos."

